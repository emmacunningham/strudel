<!DOCTYPE html>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <title>str00dl</title>
  <link rel="stylesheet" href="lib/colpick/css/colpick.css">

  <script type="text/javascript" src="lib/d3.v2.js"></script>

  <!-- The noUiSlider script and stylesheet -->
  <!-- Use the files with *.min.* for the minified versions. -->
  <link href="lib/noUiSlider/jquery.nouislider.min.css" rel="stylesheet">
  <link href="lib/noUiSlider/jquery.nouislider.pips.min.css" rel="stylesheet">

  <link rel="stylesheet" href="css/fonts.css" />
  <link rel="stylesheet" href="css/styles.css" />
 </head>
 <body>
  <div class="options-container">
    <div class="menu-toggle">
    </div>
    <div class="strudel-options">

      <div class="options-toggle" id="path-toggle">
        Path options
      </div>
      <div class="option-set" id="path-options">
        <input id="show-line" type="checkbox" name="show-line" value="show-line" checked> <label>Show path</label> <br />
        <input id="lock-testpoints" type="checkbox" name="lock-testpoints-line" value="lock-testpoints" checked> <label>Lock test points to res</label> <br />
        
        <label for="res">
               resolution = <span id="res-value">…</span>
        </label><br>

        <input type="range" min="2" max="64" id="resolutionSlider" step=".1">
        
        <br> 
        <label for="log_res">
               log resolution = <span id="log-res-value">…</span>
        </label><br>

        <input type="range" min="1" max="6" id="logResolutionSlider" step=".1">

        <br> 
        <label for="testpoints_slider">
          test points = <span id="testpoints-value">…</span>
        </label><br>

        <input type="range" min="2" max="64" id="testpointsSlider" step="1">

        <br>
        <label for="r">
               rotations = <span id="r-value">…</span>
        </label><br>

        <input type="range" min="0" max="200" id="rotationSlider" step="0.1">

        <br />

        <label for="rotation-origin">
          2d rotation around origin
        </label><br/>
        <input type="range" min="-180" max="180" value="0" id="rotation-origin" step="1"><br>

        <label for="rotation-x">
          3d rotation around X
        </label><br/>
        <input type="range" min="-180" max="180" value="0" id="rotation-x" step="1"><br>

        <label for="rotation-y">
          3d rotation around Y
        </label><br/>
        <input type="range" min="-180" max="180" value="0" id="rotation-y" step="1"><br>

        <div id="color-picker"></div>

        <label for="path-weight">
               path thickness = <span id="path-weight-value">…</span>
        </label><br>
        
        <input type="range" min=".25" max="5" id="path-weight" style="vertical-align: top;" step="0.25">

      </div>
        
      <div class="options-toggle" id="zoom-toggle">
        Zoom options
      </div>
      <div class="option-set" id="zoom-options">

        <div id="range">
        </div>
      </div>

      <div class="options-toggle" id="point-toggle">
        Point options
      </div>
      <div class="option-set" id="point-options">
        <label for="point-opacity">
          point opacity
        </label><br/>
        <input type="range" min="0" max="1" value=".5" id="point-opacity" step="0.1"><br>

        <label for="point-scale">
          point size
        </label><br/>
        <input type="range" min="0" max="10" value="3" id="point-scale" step="0.25"><br>
        
        <label for="sliver-q">
          Sliver q = <span id="sliver-q-value">…</span>
        </label><br/>
        <input type="range" min="0" max=".052" value=".0086" id="sliver-q" step="0.0001"><br>

        <label for="sliver-phi">
          Sliver φ = <span id="sliver-phi-value">…</span>
        </label><br/>
        <input type="range" min="0" max="3.14" value="1.6" id="sliver-phi" step="0.1"><br>

        <input id="show-points" type="checkbox" name="show-points" value="show-points"> <label>Show data points</label><br/>
        <input id="show-testpoints" type="checkbox" name="show-testpoints" value="show-testpoints"> <label>Show test points</label><br/>
        <input id="show-animation" type="checkbox" name="show-animation" value="show-animation" > <label>Show animation</label><br/>
        <input id="scale-points" type="checkbox" name="scale-points" value="scale-points" checked> <label>Scale points</label><br/>
        <input id="snap-points" type="checkbox" name="snap-points" value="snap-points" checked> <label>Snap points to path</label><br/>
        <input id="color-points" type="checkbox" name="color-points" value="color-points" checked> <label>Color points</label><br/>
        <button id="update-color-map" type="button">update colors</button>

      </div>

      <div class="options-toggle" id="background-toggle">
        Background options
      </div>
      <div class="option-set" id="background-options">
        <input id="show-bg" type="checkbox" name="show-bg" value="show-bg"> <label>Show background</label><br/><br/>
        <label for="bg-opacity">
          background opacity
        </label><br/>
        <input type="range" min="0" max="1" value=".5" id="bg-opacity" step="0.1">

        <br/><br/>

        <label for="bg-blur">
          background blur
        </label><br/>
        <input type="range" min="0" max="50" value="0" id="bg-blur" step="1">

        <br/><br/>

        <label for="bg-distance">
          background distance
        </label><br/>
        <input type="range" min="0" max="100" value="0" id="bg-distance" step="1">
      </div>

        <!-- Old range zoom sliders can get fucked.
        <label for="d"
               style="display: inline-block; width: 240px; text-align: right">
               d = <span id="d-value">…</span>
        </label>
        <input type="range" min="0" max="12" id="d" class="rangeSlider" step="0.1">

        <label for="v"
               style="display: inline-block; width: 240px; text-align: right">
               v = <span id="v-value">…</span>
        </label>
        <input type="range" min="0" max="12" id="v" class="rangeSlider" step="0.1">
        -->

    </div>
  </div>

  <div class="spiral-container">
    <div class="spiral-bg">

    </div>
  </div>

  <script type="text/javascript" src="lib/jquery-2.1.3.min.js"></script>
  <script type="text/javascript" src="lib/colpick/js/colpick.js"></script>

  <!-- Use the 'all' version to get all documented features. -->
  <!-- Includes wNumb, libLink and the pips add-on -->
  <script src="lib/noUiSlider/jquery.nouislider.all.min.js"></script>

  <!-- Lodash -->
  <script src="lib/lodash.min.js"></script>

<!-- old shit
  <script type="text/javascript" src="rangeZoomSpiral.js"></script>
-->
  <script type="text/javascript" src="strudelJs/MathUtils.js"></script>
  <script type="text/javascript" src="strudelJs/ui/ZoomRangeSlider.js"></script>
  <!-- Data handlers go here - we can have as many as we want, probably -->
  <script type="text/javascript" src="strudelJs/dataHandlers/WaterTempData.js"></script>
  <script type="text/javascript" src="strudelJs/dataHandlers/ClipsSample.js"></script>
  <script type="text/javascript" src="strudelJs/SpiralTimelineController.js"></script>

  <script>

    /* PMB: I had to move all of the interface-building code into the Ajax
     * handler due to dependency issues. This probably isn't ideal...
     */ 
    $.ajax('data/daily_water_temp.json').success(function(result) {
//    $.ajax('data/clips_sample.json').success(function goTimeline(result)  {

      var dataHandler = new strudel.dataHandlers.WaterTempData();
//      var dataHandler = new strudel.dataHandlers.ClipsSample();
      var spiral = new strudel.SpiralTimelineController();
      var data = dataHandler.processData(result);
      spiral.updateData(data);
      spiral.init();
      spiral.setPointColors();
    });

  </script>

 </body>
</html>
